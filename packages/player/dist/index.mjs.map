{"version":3,"sources":["../index.tsx","../PlayerShell.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nexport * from './PlayerShell';\nimport Hls from 'hls.js';\n\nexport type CaptionTrack = { label: string; srclang: string; src: string; default?: boolean };\nexport type TranscriptItem = { start: number; end: number; text: string };\nexport type Bookmark = { time: number; note?: string };\n\nexport function useABLoop() {\n  const [a, setA] = useState<number | null>(null);\n  const [b, setB] = useState<number | null>(null);\n  const [enabled, setEnabled] = useState(false);\n  const toggle = () => setEnabled((v) => !v);\n  const clear = () => {\n    setA(null);\n    setB(null);\n    setEnabled(false);\n  };\n  return { a, b, setA, setB, enabled, toggle, clear };\n}\n\nexport function useBookmarks(initial: Bookmark[] = []) {\n  const [bookmarks, setBookmarks] = useState<Bookmark[]>(initial);\n  const add = (bm: Bookmark) => setBookmarks((prev) => [...prev, bm].sort((x, y) => x.time - y.time));\n  const remove = (time: number) => setBookmarks((prev) => prev.filter((b) => b.time !== time));\n  return { bookmarks, add, remove };\n}\n\nexport function useNotes(initial: Bookmark[] = []) {\n  const [notes, setNotes] = useState<Bookmark[]>(initial);\n  const add = (bm: Bookmark) => setNotes((prev) => [...prev, bm].sort((x, y) => x.time - y.time));\n  const remove = (time: number) => setNotes((prev) => prev.filter((b) => b.time !== time));\n  return { notes, add, remove };\n}\n\nexport type CoursePlayerProps = {\n  src: string; // HLS .m3u8 URL\n  poster?: string;\n  captions?: CaptionTrack[];\n  transcript?: TranscriptItem[];\n  initialBookmarks?: Bookmark[];\n  initialNotes?: Bookmark[];\n  onBookmarkAdd?: (bm: Bookmark) => void;\n  onNoteAdd?: (bm: Bookmark) => void;\n  className?: string;\n};\n\nexport const CoursePlayer: React.FC<CoursePlayerProps> = ({\n  src,\n  poster,\n  captions = [],\n  transcript = [],\n  initialBookmarks,\n  initialNotes,\n  onBookmarkAdd,\n  onNoteAdd,\n  className,\n}) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const { a, b, setA, setB, enabled, toggle: toggleAB, clear: clearAB } = useABLoop();\n  const { bookmarks, add: addBookmark } = useBookmarks(initialBookmarks);\n  const { notes, add: addNote } = useNotes(initialNotes);\n\n  // HLS attach\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n\n    if (video.canPlayType('application/vnd.apple.mpegurl')) {\n      video.src = src;\n    } else if (Hls.isSupported()) {\n      const hls = new Hls();\n      hls.loadSource(src);\n      hls.attachMedia(video);\n      return () => hls.destroy();\n    } else {\n      video.src = src; // fallback\n    }\n  }, [src]);\n\n  // AB loop enforcement\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n    const onTime = () => {\n      if (!enabled) return;\n      if (a != null && b != null) {\n        if (video.currentTime < a) video.currentTime = a;\n        if (video.currentTime >= b) video.currentTime = a;\n      }\n    };\n    video.addEventListener('timeupdate', onTime);\n    return () => video.removeEventListener('timeupdate', onTime);\n  }, [a, b, enabled]);\n\n  // keyboard shortcuts\n  useEffect(() => {\n    const onKey = (e: KeyboardEvent) => {\n      const v = videoRef.current;\n      if (!v) return;\n      if (e.key === ' ') {\n        e.preventDefault();\n        v.paused ? v.play() : v.pause();\n      } else if (e.key.toLowerCase() === 'a') {\n        setA(v.currentTime);\n      } else if (e.key.toLowerCase() === 'b') {\n        setB(v.currentTime);\n      } else if (e.key.toLowerCase() === 'l') {\n        toggleAB();\n      } else if (e.key === 'ArrowRight') {\n        v.currentTime += 5;\n      } else if (e.key === 'ArrowLeft') {\n        v.currentTime -= 5;\n      }\n    };\n    window.addEventListener('keydown', onKey);\n    return () => window.removeEventListener('keydown', onKey);\n  }, [toggleAB, setA, setB]);\n\n  const onAddBookmark = () => {\n    const v = videoRef.current;\n    if (!v) return;\n    const bm = { time: Math.floor(v.currentTime) };\n    addBookmark(bm);\n    onBookmarkAdd?.(bm);\n  };\n\n  const onAddNote = () => {\n    const v = videoRef.current;\n    if (!v) return;\n    const text = prompt('Note');\n    if (text && text.trim()) {\n      const note = { time: Math.floor(v.currentTime), note: text.trim() };\n      addNote(note);\n      onNoteAdd?.(note);\n    }\n  };\n\n  const captionEls = useMemo(() => {\n    return captions.map((c, i) => (\n      <track key={i} label={c.label} kind=\"subtitles\" srcLang={c.srclang} src={c.src} default={c.default} />\n    ));\n  }, [captions]);\n\n  return (\n    <div className={className}>\n      <div className=\"relative\">\n        <video ref={videoRef} poster={poster} controls style={{ width: '100%', maxHeight: 480 }}>\n          {captionEls}\n        </video>\n        <div style={{ display: 'flex', gap: 8, marginTop: 8 }}>\n          <button onClick={() => videoRef.current?.play()}>Play</button>\n          <button onClick={() => videoRef.current?.pause()}>Pause</button>\n          <button onClick={() => setA(videoRef.current?.currentTime || 0)}>Set A</button>\n          <button onClick={() => setB(videoRef.current?.currentTime || 0)}>Set B</button>\n          <button onClick={toggleAB}>{enabled ? 'Disable' : 'Enable'} Loop</button>\n          <button onClick={clearAB}>Clear Loop</button>\n          <button onClick={onAddBookmark}>Bookmark</button>\n          <button onClick={onAddNote}>Note</button>\n        </div>\n      </div>\n\n      {/* Transcript */}\n      {transcript.length > 0 && (\n        <div style={{ marginTop: 16 }}>\n          <h4>Transcript</h4>\n          <ul style={{ maxHeight: 160, overflow: 'auto' }}>\n            {transcript.map((t, i) => (\n              <li key={i}>\n                <button\n                  onClick={() => {\n                    if (videoRef.current) videoRef.current.currentTime = t.start;\n                  }}\n                >\n                  [{formatTime(t.start)}] {t.text}\n                </button>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      {/* Bookmarks */}\n      {bookmarks.length > 0 && (\n        <div style={{ marginTop: 16 }}>\n          <h4>Bookmarks</h4>\n          <ul>\n            {bookmarks.map((b, i) => (\n              <li key={i}>\n                <button onClick={() => videoRef.current && (videoRef.current.currentTime = b.time)}>\n                  {formatTime(b.time)} {b.note ? `- ${b.note}` : ''}\n                </button>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      {/* Notes */}\n      {notes.length > 0 && (\n        <div style={{ marginTop: 16 }}>\n          <h4>Notes</h4>\n          <ul>\n            {notes.map((n, i) => (\n              <li key={i}>\n                <button onClick={() => videoRef.current && (videoRef.current.currentTime = n.time)}>\n                  {formatTime(n.time)} - {n.note}\n                </button>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction formatTime(sec: number) {\n  const s = Math.floor(sec % 60)\n    .toString()\n    .padStart(2, '0');\n  const m = Math.floor((sec / 60) % 60)\n    .toString()\n    .padStart(2, '0');\n  const h = Math.floor(sec / 3600)\n    .toString()\n    .padStart(2, '0');\n  return h !== '00' ? `${h}:${m}:${s}` : `${m}:${s}`;\n}\n\nexport default CoursePlayer;\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport Hls from 'hls.js';\n\nexport type GlossaryEntry = { term: string; definition: string; };\nexport type CaptionCue = { start: number; end: number; text: string };\n\nexport interface PlayerShellProps {\n  srcEn: string; // English HLS/DASH URL\n  srcHi?: string; // Hindi alternative\n  captions?: CaptionCue[]; // Provided in base (English) timeline\n  glossary?: GlossaryEntry[];\n  initialLanguage?: 'en' | 'hi';\n  className?: string;\n  driftCorrectionMs?: number; // threshold to snap drift\n}\n\nexport function selectCaptionCue(cues: CaptionCue[], time: number, driftThresholdMs: number): CaptionCue | null {\n  // exact match first\n  const direct = cues.find(c => time >= c.start && time < c.end);\n  if (direct) return direct;\n  // drift: near start within threshold\n  const thresholdSec = driftThresholdMs / 1000;\n  const near = cues.find(c => Math.abs(time - c.start) <= thresholdSec);\n  return near || null;\n}\n\ninterface UseCaptionsArgs {\n  cues: CaptionCue[];\n  videoRef: React.RefObject<HTMLVideoElement | null>;\n  enabled: boolean;\n  driftThreshold: number;\n}\n\nexport function useCaptions({ cues, videoRef, enabled, driftThreshold }: UseCaptionsArgs) {\n  const [active, setActive] = useState<CaptionCue | null>(null);\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video || !enabled) { setActive(null); return; }\n    let raf: number;\n    const loop = () => {\n      const cue = selectCaptionCue(cues, video.currentTime, driftThreshold);\n      setActive(prev => prev === cue ? prev : cue);\n      raf = requestAnimationFrame(loop);\n    };\n    raf = requestAnimationFrame(loop);\n    return () => cancelAnimationFrame(raf);\n  }, [videoRef, cues, enabled, driftThreshold]);\n  return active;\n}\n\nexport const PlayerShell: React.FC<PlayerShellProps> = ({\n  srcEn,\n  srcHi,\n  captions = [],\n  glossary = [],\n  initialLanguage = 'en',\n  driftCorrectionMs = 120,\n  className,\n}) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [lang, setLang] = useState<'en' | 'hi'>(initialLanguage);\n  const [showCaptions, setShowCaptions] = useState(true);\n  const [showGlossary, setShowGlossary] = useState(false);\n  const src = lang === 'en' ? srcEn : (srcHi || srcEn);\n\n  // attach media (HLS.js if needed)\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n    if (video.canPlayType('application/vnd.apple.mpegurl')) {\n      video.src = src;\n      return;\n    }\n    if (Hls.isSupported()) {\n      const hls = new Hls();\n      hls.loadSource(src);\n      hls.attachMedia(video);\n      return () => hls.destroy();\n    }\n    video.src = src;\n  }, [src]);\n\n  const activeCue = useCaptions({ cues: captions, videoRef, enabled: showCaptions, driftThreshold: driftCorrectionMs });\n\n  const glossaryIndex = useMemo(() => {\n    const map = new Map<string, GlossaryEntry>();\n    glossary.forEach(g => map.set(g.term.toLowerCase(), g));\n    return map;\n  }, [glossary]);\n\n  const highlighted = useMemo(() => {\n    if (!activeCue) return null;\n    const words = activeCue.text.split(/(\\s+)/).map((w, i) => {\n      const term = glossaryIndex.get(w.toLowerCase());\n      if (term) {\n        return <span key={i} data-term={term.term} className=\"player-term\" style={{ cursor: 'pointer', textDecoration: 'underline dotted' }}>{w}</span>;\n      }\n      return w;\n    });\n    return <span>{words}</span>;\n  }, [activeCue, glossaryIndex]);\n\n  // keyboard shortcuts\n  useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      const v = videoRef.current; if (!v) return;\n      if (e.key === ' ') { e.preventDefault(); v.paused ? v.play() : v.pause(); }\n      else if (e.key.toLowerCase() === 'j') { v.currentTime = Math.max(0, v.currentTime - 5); }\n      else if (e.key.toLowerCase() === 'k') { v.paused ? v.play() : v.pause(); }\n      else if (e.key.toLowerCase() === 'l') { v.currentTime = v.currentTime + 5; }\n      else if (e.key.toLowerCase() === 'c') { setShowCaptions(s => !s); }\n      else if (e.key.toLowerCase() === 'g') { setShowGlossary(g => !g); }\n    };\n    window.addEventListener('keydown', handler);\n    return () => window.removeEventListener('keydown', handler);\n  }, []);\n\n  const onGlossaryClick = useCallback((e: React.MouseEvent) => {\n    const el = (e.target as HTMLElement).closest('[data-term]');\n    if (el) {\n      const term = el.getAttribute('data-term');\n      if (term) {\n        setShowGlossary(true);\n        const entry = glossaryIndex.get(term.toLowerCase());\n        if (entry) {\n          // simple highlight scroll could be added\n        }\n      }\n    }\n  }, [glossaryIndex]);\n\n  return (\n    <div className={className} data-player-shell>\n      <div style={{ position: 'relative' }}>\n        <video ref={videoRef} controls style={{ width: '100%', maxHeight: 500 }} />\n        <div style={{ position: 'absolute', top: 8, left: 8, display: 'flex', gap: 8 }}>\n          <button onClick={() => setLang(l => l === 'en' ? 'hi' : 'en')} aria-label=\"toggle-language\">Lang: {lang}</button>\n          <button onClick={() => setShowCaptions(c => !c)} aria-label=\"toggle-captions\">CC {showCaptions ? 'On' : 'Off'}</button>\n          {glossary.length > 0 && (\n            <button onClick={() => setShowGlossary(g => !g)} aria-label=\"toggle-glossary\">Glossary</button>\n          )}\n        </div>\n        {showCaptions && activeCue && (\n          <div onClick={onGlossaryClick} aria-live=\"polite\" style={{ position: 'absolute', bottom: 40, width: '100%', textAlign: 'center', color: 'white', textShadow: '0 0 4px black', fontSize: 18 }}>\n            {highlighted}\n          </div>\n        )}\n      </div>\n      {showGlossary && (\n        <aside aria-label=\"glossary\" style={{ marginTop: 12, border: '1px solid #ddd', padding: 8, maxHeight: 200, overflow: 'auto' }}>\n          <h4 style={{ margin: '4px 0' }}>Glossary</h4>\n          <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\n            {glossary.map(g => (\n              <li key={g.term} style={{ marginBottom: 4 }}>\n                <strong>{g.term}</strong>: {g.definition}\n              </li>\n            ))}\n          </ul>\n        </aside>\n      )}\n    </div>\n  );\n};\n\nexport default PlayerShell;\n"],"mappings":"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","names":["useEffect","useMemo","useRef","useState","Hls","jsx","jsxs","useState","useRef","useEffect","useMemo","b"]}